---
import Layout from "@/layouts/Layout.astro";
import HalfTextHalfImage from "@sections/HalfTextHalfImage.astro";
import Quote from "@sections/Quote.astro";
import Navbar from "@sections/Navbar.astro";
import Footer from "@sections/Footer.astro";
import Features from "@sections/Features/index.astro";
import Container from "@sections/Container.astro";
import FAQ from "@sections/FAQ.astro";
import RenderMarkdown from "@/components/RenderMarkdown.astro";
import GithubButton from "@/components/server/GithubButton.astro";
import sectionsImage from "@/assets/sections.png";
import deployToNetlifyImage from "@/assets/deploy.png";
import fullStackImage from "@/assets/full-stack.png";

const features = [
  { title: "Astro", description: "The simplest web metaframework" },
  { title: "Alpine.js", description: "Used for client-side interactivity" },
  { title: "HTMX", description: "Used for sending HTML partials over the wire" },
  { title: "daisyUI", description: "Easy as Bootstrap; built upon Tailwind" },
  { title: "Better Auth", description: "Comprehensive auth framework for TypeScript." },
  { title: "Astro DB", description: "An approachable database solution" }
];

const faqItems = [
  {
    question: "What is Freedom Stack?",
    answer: "Freedom Stack is a full-stack Astro starter kit that feels freeing and is free."
  },
  {
    question: "How can I learn more about Astro?",
    answer:
      "If you want to learn more about the frontend layer, I recommend the [Astro Web Framework Crash Course by freeCodeCamp](https://www.youtube.com/watch?v=e-hTm5VmofI) or check out [Astro's Community Educational Content](https://docs.astro.build/en/community-resources/content/)."
  },
  {
    question: "How can I learn more about Alpine.js?",
    answer:
      "If you want to learn more about Alpine.js, I recommend [Learn Alpine.js on codecourse](https://codecourse.com/courses/learn-alpine-js)."
  },
  {
    question: "How can I learn more about the libSQL database layer?",
    answer:
      "If you want to learn more about the database layer, I recommend first starting with Astro DB's [Getting Started Guide](https://docs.astro.build/en/guides/astro-db/), and then learning from [High Performance SQLite course](https://highperformancesqlite.com/), sponsored by [Turso](https://tur.so/freedomstack)."
  },
  {
    question: "How can I learn more about Better Auth?",
    answer: "[Learn more about Better Auth.](https://www.better-auth.com/docs/integrations/astro)"
  },
  {
    question: "How do I deploy Freedom Stack?",
    answer:
      "You can deploy Freedom Stack to [Netlify](https://app.netlify.com/start/deploy?repository=https://github.com/cameronapak/freedom-stack)."
  },
  {
    question: "How can I learn more about HTMX?",
    answer: "[Learn more about HTMX.](https://htmx.org/)"
  },
  {
    question: "How can I learn more about daisyUI?",
    answer: "[Learn more about daisyUI.](https://daisyui.com/)"
  },
  {
    question: "How can I contribute to Freedom Stack?",
    answer:
      "If you'd like to contribute to Freedom Stack, please [open an issue](https://github.com/cameronapak/freedom-stack/issues) or [submit a pull request](https://github.com/cameronapak/freedom-stack/pulls). Or, if you can submit financially, please consider [buying me a coffee](https://buymeacoffee.com/campak)."
  }
];

const letterContentMarkdown = `
Hey, I'm Cam, a front-end designer and developer of over 7 years.

While I loved working on the UI, animations, and interactivity of web apps, I'd always felt held back by not knowing how to
create full-stack web apps.

I knew how to work with API's and someone else's database, but I'd never learned how to build my own until...

_A wild [Astro DB](https://docs.astro.build/en/guides/astro-db/) enters the chat!_

Creating a database table was as easy as:

\`\`\`javascript
import { defineTable } from "astro:db";

const Posts = defineTable({
  columns: {
    id: column.number({ primaryKey: true }),
    title: column.text(),
    pubDate: column.date(),
    description: column.text(),
    author: column.text(),
    imageUrl: column.text({ optional: true }),
    imageAlt: column.text({ optional: true }),
    tags: column.json({ optional: true }),
    slug: column.text({ unique: true }),
    content: column.text()
  }
});
\`\`\`

And, getting all the posts from the database was as easy as:

\`\`\`javascript
import { db, Posts } from "astro:db";

const posts = await db.select().from(Posts).all();
\`\`\`

I found myself building full-stack web apps without really having to think too much about databases. They just worked.

Writing code felt freeing and fun again.

I got this spark and reinvoration to code again after the hardest season of my life, when I was bed-ridden for around seven months. [God](https://www.gotquestions.org/what-is-the-gospel.html) sustained me through
the support of friends and family. He healed me spiritually before physically restoring my health.

After recovering, I finally felt freedom.

My hope is that Freedom Stack empowers you to create the dreams and visions on your mind and heart.

_â€” [Cam Pak](https://cameronpak.com)_
`;

// The browser should always check freshness
Astro.response.headers.set("cache-control", "public, max-age=0, must-revalidate");

// The CDN should cache for a year, but revalidate if the cache tag changes
Astro.response.headers.set("netlify-cdn-cache-control", "s-maxage=31536000");

// Tag the page with the project slug
Astro.response.headers.set("netlify-cache-tag", "components");
---

<Layout
  title="Freedom Stack Boilerplate"
  description="A free full-stack boilerplate that feels freeing. Astro, HTMX, Alpine.js, AstroÂ DB, Better Auth, Preline UI, & daisyUI."
>
  <Navbar
    title="Freedom Stack"
    links={[
      {
        text: "Netlify ðŸš€",
        href: "https://app.netlify.com/start/deploy?repository=https://github.com/cameronapak/freedom-stack"
      },
      { text: "Blog", href: "/posts" },
      { text: "Sign In", href: "/sign-in" }
    ]}
  />

  <section class="min-h-[70vh] h-fit container flex flex-col justify-center items-center py-16">
    <div class="mb-8 flex flex-wrap gap-4 justify-center">
      <GithubButton server:defer>
        <div slot="fallback" class="btn btn-outline btn-sm bg-slate-100 text-slate-100">---------------</div>
      </GithubButton>
    </div>
    <h1 class="m-0 text-center text-balance">Freedom Stack</h1>
    <p class="text-xl m-0 text-center">A full-stack Astro starter kit that feels freeing and is free.</p>
    <div class="not-prose flex flex-wrap gap-4 justify-center mt-8">
      <div class="mockup-code bg-slate-800 text-slate-50 rounded-xl p-4">
        <pre data-prefix="$"><code class="select-all">npx create-freedom-stack my-app</code></pre>
      </div>
    </div>
  </section>

  {/* Here's an HTMX example */}
  <div hx-get="/api/htmx-partials/uneed-launch" hx-trigger="load delay:500ms" hx-swap="innerHTML"></div>

  <HalfTextHalfImage
    title="Create full-stack web apps"
    subtitle="Save time, money, and headaches by using Freedom Stack."
    image={fullStackImage.src}
  />
  <HalfTextHalfImage
    title="No need to reinvent the wheel"
    subtitle="Auth? Database? Components? This starter kit has you covered."
    image={sectionsImage.src}
    reverse
  />
  <HalfTextHalfImage
    title="Focus on the fun stuff"
    subtitle="Enjoy building apps, not configuring servers. Incredibly easy to deploy."
    image={deployToNetlifyImage.src}
  />
  <Quote
    quote="enjoyed learning about Freedom Stack, Cam. Really a refreshing take on SaaS boilerplates âœ¨ plus I love Astro, too!"
    title="@poppacalypse"
    author="Carl Poppa"
  />
  <Features features={features} />

  <Container title="Why Freedom Stack?" align="center">
    <div class="bg-white p-6 rounded-xl border-2 border-slate-200 w-full text-xl leading-relaxed">
      <RenderMarkdown content={letterContentMarkdown} />
    </div>
  </Container>

  <FAQ title="FAQ" items={faqItems} />

  <Footer
    links={[
      {
        title: "Resources",
        items: [
          { text: "Code on GitHub", href: "https://github.com/cameronapak/freedom-stack" },
          { text: "Buy Me a Coffee", href: "https://buymeacoffee.com/campak" },
          { text: "Contact Cam", href: "https://cameronpak.com/pages/contact-cam" }
        ]
      },
      {
        title: "Legal",
        items: [
          { text: "Code of Conduct", href: "https://github.com/cameronapak/freedom-stack?tab=coc-ov-file#readme" },
          { text: "MIT License", href: "https://github.com/cameronapak/freedom-stack?tab=mit-1-ov-file#readme" }
        ]
      }
    ]}
  />
</Layout>
